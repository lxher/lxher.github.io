<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>Linux安装Nginx</title>
    <link href="/2023/07/29/2023-07-29/"/>
    <url>/2023/07/29/2023-07-29/</url>
    
    <content type="html"><![CDATA[<h1 id="Linux-安装-Nginx"><a href="#Linux-安装-Nginx" class="headerlink" title="Linux 安装 Nginx"></a>Linux 安装 Nginx</h1><p>今天新买了一台阿里云服务器，记录一下安装Nginx的过程</p><h2 id="安装依赖"><a href="#安装依赖" class="headerlink" title="安装依赖"></a>安装依赖</h2><h3 id="安装-gcc"><a href="#安装-gcc" class="headerlink" title="安装 gcc"></a>安装 gcc</h3><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs markdown">yum install gcc-c++<br></code></pre></td></tr></table></figure><p>Nginx依赖于gcc的编译环境</p><img src="https://image.lxher.com/blog/2023-07-29/1.png" width="700"><h3 id="安装-pcre"><a href="#安装-pcre" class="headerlink" title="安装 pcre"></a>安装 pcre</h3><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs markdown">yum install -y pcre pcre-devel<br></code></pre></td></tr></table></figure><p>Nginx的Rewrite模块和Http模块需要使用pcre来解析正则表达式语法</p><img src="https://image.lxher.com/blog/2023-07-29/2.png" width="700"><h3 id="安装-zlib"><a href="#安装-zlib" class="headerlink" title="安装 zlib"></a>安装 zlib</h3><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs markdown">yum install -y zlib zlib-devel<br></code></pre></td></tr></table></figure><p>Nginx的多个模块都需要使用zlib库中的gzip压缩算法</p><img src="https://image.lxher.com/blog/2023-07-29/3.png" width="700"><h3 id="安装-openssl"><a href="#安装-openssl" class="headerlink" title="安装 openssl"></a>安装 openssl</h3><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs markdown">yum install -y openssl openssl-devel<br></code></pre></td></tr></table></figure><p>Nginx的https模块依赖于openssl库</p><img src="https://image.lxher.com/blog/2023-07-29/4.png" width="700"><h2 id="安装-Nginx"><a href="#安装-Nginx" class="headerlink" title="安装 Nginx"></a>安装 Nginx</h2><h3 id="下载-Nginx"><a href="#下载-Nginx" class="headerlink" title="下载 Nginx"></a>下载 Nginx</h3><p>选择Nginx的安装目录，如<code>/usr/local</code>，在该目录下新建<code>nginx</code>文件夹</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs markdown">cd /usr/local<br>mkdir nginx<br></code></pre></td></tr></table></figure><p>前往官网下载Nginx，下载地址为<code>https://nginx.org/en/download.html</code></p><p>如下图，选择最新的稳定版本，这里为<code>1.24.0</code></p><img src="https://image.lxher.com/blog/2023-07-29/5.png" width="700"><p>下载后将安装包上传至<code>/usr/local/nginx</code>目录，或者可以直接在<code>/usr/local/nginx</code>目录下执行下载命令</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs markdown">curl -O https://nginx.org/download/nginx-1.24.0.tar.gz<br></code></pre></td></tr></table></figure><p>最后还需要执行解压命令，将安装包解压</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs markdown">tar -zxvf nginx-1.24.0.tar.gz<br></code></pre></td></tr></table></figure><img src="https://image.lxher.com/blog/2023-07-29/6.png" width="700"><h3 id="编译-Nginx"><a href="#编译-Nginx" class="headerlink" title="编译 Nginx"></a>编译 Nginx</h3><p>进入解压后的文件夹<code>nginx-1.24.0</code>，依次执行以下命令，即可编译安装Nginx</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs markdown">./configure --prefix=/usr/local/nginx --with-http<span class="hljs-emphasis">_stub_</span>status<span class="hljs-emphasis">_module --with-http_</span>ssl<span class="hljs-emphasis">_module</span><br><span class="hljs-emphasis">make</span><br><span class="hljs-emphasis">make install</span><br></code></pre></td></tr></table></figure><p>注意：<code>./configure</code>命令后面加的几个参数不要漏掉，后面nginx解析https链接需要用到</p><img src="https://image.lxher.com/blog/2023-07-29/7.png" width="700"><h3 id="启动-Nginx"><a href="#启动-Nginx" class="headerlink" title="启动 Nginx"></a>启动 Nginx</h3><p>安装完成后，进入<code>/usr/local/nginx/sbin</code>目录，执行启动命令<code>./nginx</code>，最后可以看到nginx启动成功了</p><img src="https://image.lxher.com/blog/2023-07-29/8.png" width="700"><h2 id="配置环境变量"><a href="#配置环境变量" class="headerlink" title="配置环境变量"></a>配置环境变量</h2><h3 id="编辑配置文件"><a href="#编辑配置文件" class="headerlink" title="编辑配置文件"></a>编辑配置文件</h3><p>执行命令<code>vi /etc/profile</code>，编辑<code>/etc/profile</code>文件</p><p>在配置文件内添加nginx路径</p><img src="https://image.lxher.com/blog/2023-07-29/9.png" width="700"><h3 id="刷新配置文件"><a href="#刷新配置文件" class="headerlink" title="刷新配置文件"></a>刷新配置文件</h3><p>执行命令<code>source /etc/profile</code>，刷新<code>/etc/profile</code>文件</p><p>最后执行命令<code>nginx -v</code>，可以成功查看nginx的版本</p><img src="https://image.lxher.com/blog/2023-07-29/10.png" width="700">]]></content>
    
    
    <categories>
      
      <category>2023</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Linux</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>MySQL8.0降级到MySQL5.7</title>
    <link href="/2023/01/21/2023-01-21/"/>
    <url>/2023/01/21/2023-01-21/</url>
    
    <content type="html"><![CDATA[<h1 id="MySQL8-0降级到MySQL5-7"><a href="#MySQL8-0降级到MySQL5-7" class="headerlink" title="MySQL8.0降级到MySQL5.7"></a>MySQL8.0降级到MySQL5.7</h1><p>因为项目需要，要把MySQL8.0降级到MySQL5.7，在这里记录一下</p><h2 id="停止MySQL8-0"><a href="#停止MySQL8-0" class="headerlink" title="停止MySQL8.0"></a>停止MySQL8.0</h2><p>打开任务管理器，找到<code>MySQL80</code>服务，右键停止服务</p><img src="https://image.lxher.com/blog/2023-01-21/1.png" width="500"><p>打开<code>开始</code>菜单，以管理员身份运行<code>cmd</code>，输入命令<code>sc delete MySQL80</code>，删除<code>MySQL80</code>服务</p><img src="https://image.lxher.com/blog/2023-01-21/2.png" width="300"><h2 id="下载MySQL5-7"><a href="#下载MySQL5-7" class="headerlink" title="下载MySQL5.7"></a>下载MySQL5.7</h2><p>下载地址为<code>https://downloads.mysql.com/archives/community/</code>，下载版本为<code>5.7.39</code>，选择第二个压缩包下载</p><img src="https://image.lxher.com/blog/2023-01-21/3.png" width="800"><p>将<code>mysql-5.7.39-winx64.zip</code>压缩包解压到<code>C:\Program Files\MySQL</code>目录下，这个目录通常是<code>MySQL8.0</code>的安装目录</p><img src="https://image.lxher.com/blog/2023-01-21/4.png" width="500"><h2 id="配置MySQL5-7"><a href="#配置MySQL5-7" class="headerlink" title="配置MySQL5.7"></a>配置MySQL5.7</h2><p>在<code>mysql-5.7.39-winx64</code>目录下创建<code>data</code>文件夹和<code>my.ini</code>文件</p><img src="https://image.lxher.com/blog/2023-01-21/5.png" width="500"><p>修改<code>my.ini</code>文件为以下内容，注意<code>basedir</code>和<code>datadir</code>为自己下载的<code>MySQL5.7</code>的安装目录和数据目录</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs markdown">[mysql]<br><span class="hljs-section"># mysql客户端默认字符集</span><br>default-character-set=utf8 <br>[mysqld]<br><span class="hljs-section"># 端口</span><br>port=3306 <br><span class="hljs-section"># mysql的安装目录</span><br>basedir=C:\Program Files\MySQL\mysql-5.7.39-winx64<br><span class="hljs-section"># mysql的数据目录</span><br>datadir=C:\Program Files\MySQL\mysql-5.7.39-winx64\data<br><span class="hljs-section"># 允许最大连接数</span><br>max<span class="hljs-emphasis">_connections=200</span><br><span class="hljs-emphasis"># 服务端使用的默认字符集</span><br><span class="hljs-emphasis">character-set-server=utf8</span><br><span class="hljs-emphasis"># 创建新表时的默认存储引擎</span><br><span class="hljs-emphasis">default-storage-engine=INNODB</span><br><span class="hljs-emphasis"># 跳过表验证</span><br><span class="hljs-emphasis">skip-grant-tables=1</span><br></code></pre></td></tr></table></figure><p>在环境变量<code>Path</code>中加入<code>MySQL5.7</code>的<code>bin</code>路径，即<code>C:\Program Files\MySQL\mysql-5.7.39-winx64\bin</code></p><img src="https://image.lxher.com/blog/2023-01-21/6.png" width="400"><h2 id="安装MySQL5-7"><a href="#安装MySQL5-7" class="headerlink" title="安装MySQL5.7"></a>安装MySQL5.7</h2><p>打开<code>开始</code>菜单，以管理员身份运行<code>cmd</code>,依次执行以下命令</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs markdown">cd C:\Program Files\MySQL\mysql-5.7.39-winx64\bin<br><br>mysqld --initialize<br><br>mysqld --install<br></code></pre></td></tr></table></figure><p>执行命令<code>net start mysql</code>，启动<code>MySQL5.7</code>服务</p><img src="https://image.lxher.com/blog/2023-01-21/7.png" width="500"><h2 id="登录MySQL5-7"><a href="#登录MySQL5-7" class="headerlink" title="登录MySQL5.7"></a>登录MySQL5.7</h2><p>执行命令<code>mysql -u root -p</code>，不用输入密码，直接回车，即可登录</p><img src="https://image.lxher.com/blog/2023-01-21/8.png" width="600"><p>依次执行以下sql语句，将<code>root</code>账号的密码修改为<code>123456</code>，这里的密码不固定，为自己常用的密码即可</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs markdown">use mysql;<br><br>update <span class="hljs-code">`user`</span> set <span class="hljs-code">`authentication_string`</span> = password(&#x27;123456&#x27;),password<span class="hljs-emphasis">_last_</span>changed=now() where <span class="hljs-code">`user`</span> = &#x27;root&#x27;;<br><br>exit;<br></code></pre></td></tr></table></figure><p>接着修改<code>my.ini</code>文件，删除最后一行<code>skip-grant-tables=1</code>内容，取消表验证的跳过</p><p>最后依次执行命令<code>net stop mysql</code>，<code>net start mysql</code>，重启<code>MySQL5.7</code>服务</p><img src="https://image.lxher.com/blog/2023-01-21/9.png" width="600"><p>这个时候<code>MySQL5.7</code>就安装好了，我们可以使用刚才设置的<code>root</code>账号密码去登录了</p>]]></content>
    
    
    <categories>
      
      <category>2023</category>
      
    </categories>
    
    
    <tags>
      
      <tag>MySQL</tag>
      
    </tags>
    
  </entry>
  
  
  
  
</search>
